import 'package:flutter_test/flutter_test.dart';
import 'package:hn_flutter/json_parsing.dart';

main() {
  test("parses topstories.json", () {
    const jsonString =
        "[23299993,23297463,23295989,23292215,23300011,23291788,23297991,23292161,23290637,23300051,23296321,23298322,23299996,23295590,23298173,23290443,23293266,23300056,23297888,23291071,23290767,23299334,23295331,23296617,23289409,23298814,23290154,23297113,23296565,23296768,23290817,23298611,23298315,23294244,23293642,23291458,23293313,23290813,23298986,23297710,23290943,23292749,23290844,23295975,23293714,23291837,23293462,23282113,23297873,23292885,23289563,23273247,23294189,23294427,23281690,23279837,23294294,23297872,23289593,23294983,23290953,23289697,23281814,23287278,23279160,23297576,23294799,23291589,23289886,23289185,23285845,23282207,23293443,23295040,23290769,23292805,23291779,23295041,23291337,23281634,23286362,23296336,23294003,23290722,23288855,23287364,23280372,23276456,23281564,23287419,23292929,23291818,23291593,23291170,23277594,23296862,23290536,23271572,23291329,23285249,23295639,23290906,23289880,23289249,23290581,23285593,23278405,23287731,23285608,23281542,23289052,23281870,23291925,23279399,23290867,23297833,23292850,23282209,23272992,23291094,23285466,23285664,23291466,23292821,23292759,23280378,23287116,23282607,23297528,23286609,23282900,23290815,23289562,23297764,23280402,23278754,23291155,23290476,23281568,23284912,23290892,23288851,23288318,23297273,23299072,23271009,23281994,23273452,23274668,23275053,23283527,23297959,23291328,23271624,23277706,23291229,23276259,23293835,23277081,23281278,23286140,23290795,23297070,23276261,23283880,23286931,23284987,23276786,23271053,23282386,23287286,23283466,23289042,23277960,23279731,23296038,23295038,23289939,23283551,23271029,23296165,23279692,23283675,23284588,23271281,23296106,23275080,23294100,23277109,23281902,23274540,23284316,23282278,23285758,23282546,23275308,23287805,23271178,23280947,23288519,23290716,23286838,23281601,23282035,23275315,23286323,23291851,23295745,23284418,23288141,23282436,23287495,23278106,23283706,23282754,23279015,23279299,23288610,23282397,23271973,23271604,23272442,23284569,23284469,23290018,23288122,23290945,23289873,23290596,23274094,23273758,23288399,23273543,23287976,23276789,23291032,23271649,23282855,23292459,23271084,23282401,23287446,23274032,23280674,23273177,23295716,23278536,23271732,23280734,23272054,23285326,23288774,23282023,23288621,23292214,23296454,23284966,23279327,23280277,23287979,23271872,23271298,23280070,23272950,23277161,23286984,23278806,23294041,23284196,23287348,23282192,23282784,23295425,23293646,23278157,23277609,23291716,23285054,23271096,23279220,23281024,23286287,23278310,23276513,23294772,23287926,23279797,23292711,23296766,23284717,23275602,23288969,23290142,23290603,23275707,23278895,23282099,23273574,23291660,23285567,23288143,23271154,23276521,23284914,23291343,23296306,23286733,23277950,23274460,23277935,23274185,23288207,23276702,23275204,23288557,23282661,23290723,23290574,23278387,23273097,23281880,23285158,23287847,23288733,23284795,23282555,23276511,23276393,23277699,23278958,23288035,23283323,23285355,23276303,23279908,23289391,23273288,23289305,23281668,23278372,23276357,23281926,23286596,23271169,23281005,23286133,23276370,23285416,23286320,23275293,23285045,23279050,23279614,23289830,23276117,23280504,23279708,23271912,23283615,23277574,23286892,23276417,23286786,23295317,23281398,23286324,23286313,23285961,23277340,23277282,23275393,23272991,23275082,23290734,23284310,23272635,23292949,23283744,23273203,23277536,23283362,23279478,23282495,23277077,23276055,23282683,23290707,23275362,23288402,23288088,23278421,23285047,23288054,23275734,23275665,23278312,23280190,23277260,23279423,23272602,23275503,23271227,23281954,23279909,23277692,23277341,23275775,23275280,23285474,23282343,23273939,23282122,23272143,23271179,23278766,23291118,23278508,23274519,23272222,23271769,23283620,23285441,23275952,23271109,23273340,23277116,23272811,23275049,23271108,23277942,23273374,23274724,23273786,23278836,23278908,23291427,23275681,23275404,23280610,23299323,23276146,23274908,23291465,23273615,23297496,23291430,23273960,23271944,23271935,23274079,23271152,23271260,23295280,23294372]";

    expect(parseTopStories(jsonString).first, 23299993);
  });

  test("parses item.json", () {
    const jsonString =
        '{"by":"dhouston","descendants":71,"id":8863,"kids":[9224,8917,8952,8884,8887,8869,8958,8940,8908,9005,8873,9671,9067,9055,8865,8881,8872,8955,10403,8903,8928,9125,8998,8901,8902,8907,8894,8870,8878,8980,8934,8943,8876],"score":104,"time":1175714200,"title":"My YC app: Dropbox - Throw away your USB drive","type":"story","url":"http://www.getdropbox.com/u/2/screencast.html"}';

    expect(parseArticle(jsonString).by, "dhouston");
  });
}
